# 注册功能使用说明

## 功能特性

### ✅ 已实现的功能

1. **完整的注册表单**
   - 用户名（必填，3-20位字符，只能包含字母、数字、下划线）
   - 邮箱（必填，需符合邮箱格式）
   - 密码（必填，至少6位）
   - 确认密码（必填，需与密码一致）
   - 昵称（可选，默认使用用户名）
   - 手机号（可选，11位数字）

2. **实时表单验证**
   - 用户名格式验证
   - 用户名重复检查（通过API）
   - 邮箱格式验证
   - 邮箱重复检查（通过API）
   - 密码长度验证
   - 密码一致性验证
   - 实时错误提示

3. **用户体验优化**
   - 服务条款和隐私政策勾选
   - 加载状态显示
   - 弹窗消息提示
   - 注册成功自动跳转到登录页
   - 注册成功后自动填充用户名和密码

4. **页面切换**
   - 登录页 ↔️ 注册页无缝切换
   - 动态二维码显示
   - 社交账号注册入口（待实现）

## 使用流程

### 1. 访问注册页面

在登录页点击 **"还没有账号？请先注册"** 链接

### 2. 填写注册信息

#### 必填项：
- **用户名**: 输入3-20位字符（字母、数字、下划线）
  - ❌ 错误示例: `ab`, `user@123`, `用户名`
  - ✅ 正确示例: `user123`, `test_user`, `zhang_san`

- **邮箱**: 输入有效的邮箱地址
  - ❌ 错误示例: `test`, `test@`, `test.com`
  - ✅ 正确示例: `test@example.com`, `user@qq.com`

- **密码**: 至少6位字符
  - ❌ 错误示例: `12345`
  - ✅ 正确示例: `123456`, `password123`

- **确认密码**: 必须与密码一致

#### 可选项：
- **昵称**: 不填写时默认使用用户名
- **手机号**: 输入11位数字

### 3. 同意服务条款

勾选 **"我已阅读并同意用户协议和隐私政策"**

### 4. 点击注册

系统会：
1. 验证所有表单字段
2. 检查用户名和邮箱是否已被使用
3. 提交注册请求到后端
4. 显示注册结果

### 5. 注册成功

- 显示成功提示
- 2秒后自动跳转到登录页
- 用户名和密码自动填充

## 表单验证规则

### 用户名验证
```javascript
- 长度: 3-20位字符
- 格式: 只能包含字母、数字、下划线
- 唯一性: 不能与已有用户名重复
```

### 邮箱验证
```javascript
- 格式: 符合标准邮箱格式 (xxx@xxx.xxx)
- 唯一性: 不能与已注册邮箱重复
```

### 密码验证
```javascript
- 长度: 至少6位字符
- 一致性: 确认密码必须与密码一致
```

### 手机号验证（可选）
```javascript
- 格式: 11位数字
```

## 错误提示

### 表单验证错误
- 在输入框下方实时显示红色错误文字
- 失去焦点时触发验证

### 系统错误
- 以弹窗形式显示
- 3秒后自动关闭
- 可手动关闭

### 常见错误提示

| 错误信息 | 原因 | 解决方法 |
|---------|------|----------|
| "用户名长度应为3-20位字符" | 用户名太短或太长 | 调整用户名长度 |
| "用户名只能包含字母、数字和下划线" | 包含特殊字符 | 只使用允许的字符 |
| "该用户名已被使用" | 用户名重复 | 更换用户名 |
| "请输入有效的邮箱地址" | 邮箱格式错误 | 检查邮箱格式 |
| "该邮箱已被注册" | 邮箱重复 | 使用其他邮箱或找回密码 |
| "密码长度至少为6位" | 密码太短 | 增加密码长度 |
| "两次输入的密码不一致" | 确认密码不匹配 | 重新输入确认密码 |
| "请阅读并同意用户协议和隐私政策" | 未勾选同意框 | 勾选同意框 |

## API接口

### 注册接口
```http
POST /api/auth/register
Content-Type: application/json

{
  "username": "testuser",
  "password": "123456",
  "email": "test@example.com",
  "nickname": "测试用户",
  "phone": "13800138000"
}
```

### 检查用户名
```http
GET /api/user/check/username/{username}
```

### 检查邮箱
```http
GET /api/user/check/email/{email}
```

## 测试案例

### 测试用例 1: 正常注册流程

```
步骤:
1. 点击"注册"链接
2. 输入用户名: newuser
3. 输入邮箱: newuser@example.com
4. 输入密码: 123456
5. 确认密码: 123456
6. 勾选同意条款
7. 点击"立即注册"

预期结果:
✅ 注册成功
✅ 显示成功提示
✅ 2秒后跳转到登录页
✅ 用户名和密码已填充
```

### 测试用例 2: 用户名重复

```
步骤:
1. 输入已存在的用户名
2. 失去焦点

预期结果:
❌ 显示"该用户名已被使用"
❌ 提交按钮可点击但会被验证拦截
```

### 测试用例 3: 密码不一致

```
步骤:
1. 输入密码: 123456
2. 确认密码: 654321
3. 失去焦点

预期结果:
❌ 显示"两次输入的密码不一致"
```

## 开发环境特性

### 后端验证码显示
- 开发环境下，验证码会在响应中返回
- 控制台会打印验证码
- 生产环境需要通过邮件/短信发送

### 自动填充
- 注册成功后会自动填充登录表单
- 方便测试和用户体验

## 待实现功能

- [ ] 手机号验证
- [ ] 邮箱验证码确认
- [ ] 第三方账号注册（微信、QQ、微博）
- [ ] 图片验证码
- [ ] 密码强度提示
- [ ] 用户协议和隐私政策页面

## 注意事项

1. **密码安全**
   - 密码在前端明文传输到后端
   - 后端使用 BCrypt 加密存储
   - 生产环境建议使用 HTTPS

2. **表单验证**
   - 前端验证仅用于用户体验
   - 后端仍需进行完整验证
   - 不可完全依赖前端验证

3. **用户体验**
   - 实时验证避免提交时才发现错误
   - 错误提示清晰明确
   - 加载状态及时反馈

## 技术实现

### 组件结构
```
RegisterPage.vue
├── 页面容器 (page-container)
├── 页面标题 (page-header)
├── 注册卡片 (register-card)
│   ├── 左侧装饰区 (left-section)
│   │   ├── 欢迎内容 (welcome-content)
│   │   ├── 二维码 (qr-code)
│   │   └── 底部链接 (footer-link)
│   └── 右侧表单区 (right-section)
│       ├── 表单标题 (form-title)
│       ├── 注册表单 (register-form)
│       ├── 服务条款 (agreement)
│       └── 社交登录 (social-login)
└── 消息弹窗 (MessageBox)
```

### 关键功能
- **实时验证**: 使用 `@blur` 事件触发验证
- **API调用**: 使用 async/await 处理异步请求
- **状态管理**: 使用 reactive 管理表单数据
- **事件通信**: 使用 emit 触发父组件事件

---

**提示**: 测试时建议使用不同的用户名和邮箱，避免重复注册问题。

