# 主配置文件 - 所有环境共用配置
# 环境特定配置请查看 application-dev.yml 或 application-prod.yml
# 服务器配置（所有环境共用）
server:
  servlet:
    context-path: /api
  tomcat:
    max-http-form-post-size: 10MB
  max-http-request-header-size: 8KB


spring:
  application:
    name: LoginRegister_New

  # 配置切换: dev(开发) 或 prod(生产)
  profiles:
    active: dev
  
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration
  
  # 虚拟线程配置（所有环境共用）
  threads:
    virtual:
      enabled: true
  
  # Jackson配置（所有环境共用）
  jackson:
    time-zone: Asia/Shanghai
    date-format: yyyy-MM-dd HH:mm:ss
    default-property-inclusion: non_null
    serialization:
      write-dates-as-timestamps: false
      fail-on-empty-beans: false
    deserialization:
      fail-on-unknown-properties: false
      accept-single-value-as-array: true
  
  # 邮件配置（所有环境共用，具体值在环境配置文件中）
  mail:
    protocol: smtps
    properties:
      mail:
        smtp:
          auth: true
          ssl:
            enable: true
  
  # 文件上传配置（所有环境共用）
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB



# MyBatis配置（所有环境共用）
mybatis:
  mapper-locations: classpath:mapper/**/*.xml
  type-aliases-package: com.vortex.loginregister_new.entity
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: true
    lazy-loading-enabled: true
    aggressive-lazy-loading: false

# MyBatis Plus配置（所有环境共用）
mybatis-plus:
  mapper-locations: classpath:mapper/**/*.xml
  type-aliases-package: com.vortex.loginregister_new.entity
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: true
    lazy-loading-enabled: true
    aggressive-lazy-loading: false
  global-config:
    db-config:
      id-type: auto
      logic-delete-field: deleted
      logic-delete-value: 1
      logic-not-delete-value: 0
      update-strategy: not_null
    banner: false

# JWT配置（所有环境共用，密钥在环境配置文件中）
jwt:
  expiration: 86400000
  refresh-expiration: 604800000
  header: Authorization
  token-prefix: Bearer 

# 文件上传配置（所有环境共用）
file:
  upload:
    path: uploads
    url-prefix: /api/uploads

# MinIO配置
# 注意：MinIO的具体配置值（endpoint、access-key、secret-key、bucket-name等）在各环境配置文件中设置
